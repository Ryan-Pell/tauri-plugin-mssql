{"version":3,"file":"index.js","sources":["../node_modules/@tauri-apps/api/chunk-FEIY7W7S.js","../node_modules/@tauri-apps/api/chunk-RCPA6UVN.js","../js-guest/index.ts"],"sourcesContent":["var d=Object.defineProperty;var e=(c,a)=>{for(var b in a)d(c,b,{get:a[b],enumerable:!0})};export{e as a};\n","import{a as d}from\"./chunk-FEIY7W7S.js\";var f={};d(f,{convertFileSrc:()=>w,invoke:()=>c,transformCallback:()=>s});function u(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function s(e,r=!1){let n=u(),t=`_${n}`;return Object.defineProperty(window,t,{value:o=>(r&&Reflect.deleteProperty(window,t),e==null?void 0:e(o)),writable:!1,configurable:!0}),n}async function c(e,r={}){return new Promise((n,t)=>{let o=s(i=>{n(i),Reflect.deleteProperty(window,`_${a}`)},!0),a=s(i=>{t(i),Reflect.deleteProperty(window,`_${o}`)},!0);window.__TAURI_IPC__({cmd:e,callback:o,error:a,...r})})}function w(e,r=\"asset\"){let n=encodeURIComponent(e);return navigator.userAgent.includes(\"Windows\")?`https://${r}.localhost/${n}`:`${r}://localhost/${n}`}export{s as a,c as b,w as c,f as d};\n","import { invoke } from '@tauri-apps/api/tauri'\r\n\r\n/**\r\n * \r\n * @param {string} connection This is a optional connection string that you can use to connect to another database that is not the default. The default is the one that is defined within the Tauri setup. The string should be used as as a JDBC string (starting with jdbc:sqlserver://...), or a .NET string (e.g, Data Source=myServerName\\myInstance;Database=myDatabase;Integrated Security=false;User ID=sa;Password=<password>;Encrypt=true;TrustServerCertificate=true;). \r\n * @returns This will return nothing if successfully connected. If there is an error the error will be returned.\r\n */\r\nexport function connect (connection?: string) {\r\n  return new Promise<boolean>((resolve, reject) => {\r\n    let options: { db?: string} = {}\r\n    if(connection){ options = { ...options, db: connection } }\r\n\r\n    invoke('plugin:mssql|connect', options)\r\n      .then(() => resolve(true))\r\n      .catch(error => reject(JSON.parse(error)))\r\n  })\r\n}\r\n\r\n/**\r\n * \r\n * @returns This will return nothing if successfully disconnected. If an error occurs the error will be returned.\r\n */\r\nexport function disconnect () {\r\n  return new Promise<boolean>((resolve, reject) => {\r\n    invoke('plugin:mssql|disconnect')\r\n      .then(() => resolve(true))\r\n      .catch(error => reject(JSON.parse(error)))\r\n  })\r\n}\r\n\r\ntype Results = {\r\n  recordsets: Array<RecordSet<any>>\r\n}\r\n\r\nexport interface RecordSet<T> extends Array<T>  {}\r\n\r\n/**\r\n * \r\n * @param {string} query This is the query that the server will run and return the data.\r\n * @returns {Promise<{raw: string, json: void}>} This will return a object with the raw string from the database query and a json function to get a parsed version of the query.\r\n */\r\nexport function query (query: string, connection?: string) {\r\n  return new Promise<{raw: string, json: () => Results}>((resolve, reject) => {\r\n    let options = {tsql: query} as { tsql: string, connection?: string}\r\n    if(connection){ options = { ...options, connection } } //add connection string to options\r\n\r\n    invoke('plugin:mssql|query', options)\r\n      .then((query: any) => {\r\n        resolve({\r\n          raw: query,\r\n          json: () => JSON.parse(query.toString())\r\n        })\r\n      })\r\n      .catch(err => reject({ error: err, query }))\r\n  })  \r\n}\r\n\r\nexport interface SqlConnection {\r\n  applicationName: string | null,\r\n  database: string | null,\r\n  host: string| null,\r\n  instanceName: string | null,\r\n  user: string | null\r\n}\r\n\r\n/**\r\n * \r\n * @returns {Promise<SqlConnection>} This will return the default connection string provided in the Tauri Rust setup. \r\n */\r\nexport function defaultConnectionString () {\r\n  return new Promise<SqlConnection>((resolve, reject) => {\r\n    invoke('plugin:mssql|default_config')\r\n      .then((config: any) => resolve(JSON.parse(config)))\r\n      .catch(err => reject(err))\r\n  })\r\n}\r\n\r\n/**\r\n * \r\n * @returns The status of the current connection. This will currently NOT return the active server that is connected.\r\n */\r\nexport function connectionStatus () {\r\n  return new Promise<boolean>((resolve) => {\r\n    invoke('plugin:mssql|connection_status')\r\n      .then((status: any) => resolve(String(status).toLowerCase() === 'true'))\r\n  })\r\n}"],"names":["d","Object","defineProperty","s","e","r","n","window","crypto","getRandomValues","Uint32Array","t","value","o","Reflect","deleteProperty","writable","configurable","async","c","Promise","i","a","__TAURI_IPC__","cmd","callback","error","w","encodeURIComponent","navigator","userAgent","includes","connect","connection","resolve","reject","options","db","invoke","then","catch","JSON","parse","disconnect","query","tsql","raw","json","toString","err","defaultConnectionString","config","connectionStatus","status","String","toLowerCase","b","get","enumerable","convertFileSrc","transformCallback"],"mappings":"AAAA,IAAIA,EAAEC,OAAOC,eCA8K,SAASC,EAAEC,EAAEC,GAAE,GAAI,IAAIC,EAA5EC,OAAOC,OAAOC,gBAAgB,IAAIC,YAAY,IAAI,GAAgCC,EAAE,IAAIL,IAAI,OAAOL,OAAOC,eAAeK,OAAOI,EAAE,CAACC,MAAMC,IAAIR,GAAGS,QAAQC,eAAeR,OAAOI,GAAM,MAAHP,OAAQ,EAAOA,EAAES,IAAIG,UAAS,EAAGC,cAAa,IAAKX,CAAC,CAACY,eAAeC,EAAEf,EAAEC,EAAE,CAAE,GAAE,OAAO,IAAIe,SAAQ,CAACd,EAAEK,KAAK,IAAIE,EAAEV,GAAEkB,IAAIf,EAAEe,GAAGP,QAAQC,eAAeR,OAAO,IAAIe,IAAG,IAAG,GAAIA,EAAEnB,GAAEkB,IAAIV,EAAEU,GAAGP,QAAQC,eAAeR,OAAO,IAAIM,IAAI,IAAE,GAAIN,OAAOgB,cAAc,CAACC,IAAIpB,EAAEqB,SAASZ,EAAEa,MAAMJ,KAAKjB,GAAE,GAAG,CAAC,SAASsB,EAAEvB,EAAEC,EAAE,SAAS,IAAIC,EAAEsB,mBAAmBxB,GAAG,OAAOyB,UAAUC,UAAUC,SAAS,WAAW,WAAW1B,eAAeC,IAAI,GAAGD,iBAAiBC,GAAG,CCOhuB,SAAU0B,EAASC,GACvB,OAAO,IAAIb,SAAiB,CAACc,EAASC,KACpC,IAAIC,EAA0B,CAAA,EAC3BH,IAAaG,EAAU,IAAKA,EAASC,GAAIJ,IAE5CK,EAAO,uBAAwBF,GAC5BG,MAAK,IAAML,GAAQ,KACnBM,OAAMd,GAASS,EAAOM,KAAKC,MAAMhB,KAAQ,GAEhD,UAMgBiB,IACd,OAAO,IAAIvB,SAAiB,CAACc,EAASC,KACpCG,EAAO,2BACJC,MAAK,IAAML,GAAQ,KACnBM,OAAMd,GAASS,EAAOM,KAAKC,MAAMhB,KAAQ,GAEhD,CAagB,SAAAkB,EAAOA,EAAeX,GACpC,OAAO,IAAIb,SAA4C,CAACc,EAASC,KAC/D,IAAIC,EAAU,CAACS,KAAMD,GAClBX,IAAaG,EAAU,IAAKA,EAASH,eAExCK,EAAO,qBAAsBF,GAC1BG,MAAMK,IACLV,EAAQ,CACNY,IAAKF,EACLG,KAAM,IAAMN,KAAKC,MAAME,EAAMI,aAC7B,IAEHR,OAAMS,GAAOd,EAAO,CAAET,MAAOuB,EAAKL,WAAS,GAElD,UAcgBM,IACd,OAAO,IAAI9B,SAAuB,CAACc,EAASC,KAC1CG,EAAO,+BACJC,MAAMY,GAAgBjB,EAAQO,KAAKC,MAAMS,MACzCX,OAAMS,GAAOd,EAAOc,IAAK,GAEhC,UAMgBG,IACd,OAAO,IAAIhC,SAAkBc,IAC3BI,EAAO,kCACJC,MAAMc,GAAgBnB,EAAyC,SAAjCoB,OAAOD,GAAQE,gBAA0B,GAE9E,CFtFkC,EAACpC,EAAEG,KAAK,IAAI,IAAIkC,KAAKlC,EAAEtB,EAAEmB,EAAEqC,EAAE,CAACC,IAAInC,EAAEkC,GAAGE,YAAW,KCAnC1D,CAAH,CAAE,EAAK,CAAC2D,eAAe,IAAIhC,EAAEW,OAAO,IAAInB,EAAEyC,kBAAkB,IAAIzD"}